!function(e){e.fn.relCopy=function(t){var i=jQuery.extend({excludeSelector:".exclude",emptySelector:".empty",copyClass:"copy",append:"",clearInputs:!0,selectize:"",limit:0},t);return i.limit=parseInt(i.limit),this.each(function(){e(this).click(function(){var t=e(this).attr("rel"),c=e(t).length;if(0!=i.limit&&c>=i.limit)return!1;var a=e(t+":first");i.selectize&&a.find(i.selectize).each(function(){this.selectize&&this.selectize.destroy()});var r=e(a).parent(),n=e(a).clone(!0).addClass(i.copyClass+c).append(i.append);if(i.excludeSelector&&e(n).find(i.excludeSelector).remove(),i.emptySelector&&e(n).find(i.emptySelector).empty(),e(n).attr("id")){var s=e(n).attr("id")+(c+1);e(n).attr("id",s)}return e(n).find("[id]").each(function(){var t=e(this).attr("id")+(c+1);e(this).attr("id",t)}),i.clearInputs&&(e(n).find(":input").each(function(){var t=e(this).attr("type");switch(t){case"button":break;case"reset":break;case"submit":break;case"checkbox":e(this).attr("checked","");break;default:e(this).val("")}}),i.selectize&&(a.find(i.selectize).each(function(){e(this).selectize({create:!1})}),e(n).find(i.selectize).each(function(){e(this).selectize({create:!1})}))),e(r).find(t+":last").after(n),!1})}),this}}(jQuery);